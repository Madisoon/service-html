define(function(require,exports,module){function e(e,n,l){p.system.moduleManage.insertModule(e,n,l,function(e){0===e.result?layer.msg(" 添 加 失 败",{icon:2,time:1200}):layer.msg(" 添 加 成 功",{icon:1,time:1200,success:function(e,n){""===l?t():o(l)}})})}function t(){p.system.moduleManage.getAllModule(function(e){var t=e.data,l=e.data.length,i=[];if(0===e.result)$(".first-main-html .list-group").empty();else{$(".first-main-html .list-group").empty();for(var a=0;a<l;a++)i.push('<li class="list-group-item li-module-info" module-id="'+t[a].menu_id+'">'),i.push(" "+t[a].menu_name),i.push('<span class="glyphicon glyphicon-trash span-icon-cursor span-red delete-module tooltip-show" data-toggle="tooltip" data-placement="left" title="删 除"  module-id="'+t[a].menu_id+'"></span>'),i.push('<span class="glyphicon glyphicon-repeat span-blue span-icon-cursor update-module tooltip-show" data-toggle="tooltip" data-placement="top" title="修 改" module-name="'+t[a].menu_name+'"    module-id="'+t[a].menu_id+'"></span>'),i.push("</li>");$(".first-main-html .list-group").append(i.join("")),$(".tooltip-show").tooltip(),$(".li-module-info").click(function(){$(".li-module-info").removeClass("activeli"),$(this).addClass("activeli"),u=$(this).attr("module-id"),o(u)}),$(".list-group .list-group-item:first").trigger("click"),$(".delete-module").click(function(){n($(this).attr("module-id"),"first"),$(this).parent().remove()}),$(".update-module").click(function(){$("#update-first-name").val($(this).attr("module-name")),d=$(this).attr("module-id"),s=layer.open({title:"修改一级模块",type:1,area:["30%","33%"],content:$("#update-first-module-dialog")})})}})}function o(e){p.system.moduleManage.getAllSecondModule(e,function(e){if(0===e.result)$(".module-info-show-table").empty();else{var t=e.data,o=e.data.length,l=[];$(".module-info-show-table").empty();for(var i=0;i<o;i++)l.push("<tr>"),l.push("<td>"+t[i].menu_name+"</td>"),l.push("<td>"+t[i].menu_content+"</td>"),l.push('<td><span class="glyphicon glyphicon-trash span-icon-cursor second-module-delete tooltip-show span-red" data-toggle="tooltip" data-placement="top" title="删 除"  module-id="'+t[i].menu_id+'"></span></td>'),l.push('<td><span class="glyphicon glyphicon-edit span-icon-cursor second-module-update tooltip-show span-blue"  data-toggle="tooltip" data-placement="top" title="修 改"  module-id="'+t[i].menu_id+'" module-name="'+t[i].menu_name+'" module-content="'+t[i].menu_content+'"  ></span></td>'),l.push("</tr>");$(".module-info-show-table").append(l.join("")),$(".tooltip-show").tooltip(),$(".second-module-delete").click(function(){n($(this).attr("module-id"),"second"),$(this).parent().parent().remove()}),$(".second-module-update").unbind("click").click(function(){$("#update-second-name").val($(this).attr("module-name")),$("#update-second-url").val($(this).attr("module-content")),d=$(this).attr("module-id"),c=layer.open({title:"修 改 二 级 模 块",type:1,area:["50%","60%"],content:$("#update-second-module-dialog")})})}})}function n(e,o){p.system.moduleManage.deleteModule(e,function(e){0===e.result?layer.msg(" 删 除 失 败 ",{icon:2,time:1200}):layer.msg(" 删 除 成 功 ",{icon:1,time:1200,success:function(){"first"==o&&t()}})})}function l(e,o,n){p.system.moduleManage.updateModuleInfo(e,o,n,function(e){layer.close(s),layer.close(c),0===e.result?layer.msg(" 修 改 失 败 ",{icon:2,time:1200}):layer.msg(" 修 改 成 功 ",{icon:1,time:1200,success:function(){t()}})})}var i,a,s,c,d,u,p=require("../../common/api");window.parent.SYSTEM;t(),$("#add-first-module").unbind("click").click(function(){i=layer.open({title:"添 加 一 级 模 块",type:1,area:["30%","60%"],content:$("#add-first-module-ialog")})}),$("#add-second-module").unbind("click").click(function(){a=layer.open({title:"添 加 二 级 模 块",type:1,area:["60%","60%"],content:$("#add-second-module-ialog")})}),$(".delete-module").click(function(){$(this).parent().parent().addClass("animated zoomOut");var e=this;setTimeout(function(){$(e).parent().parent().remove()},500)}),$(".module-context .second-fix").unbind("click").click(function(){var e=[];e.push('<div class="module-context animated zoomIn">'),e.push('<input type="text" class="form-control second-module-name" placeholder="模块名称">'),e.push('<input type="text" class="form-control second-module-url second-input" placeholder="模块地址配置">'),e.push('<div class="operationicon">'),e.push('<span class="glyphicon glyphicon-trash span-icon span-icon-cursor delete-module span-red"></span>'),e.push("</div>"),e.push('<div style="clear: both"></div>'),e.push("</div>"),$("#add-second-module-ialog .context").append(e.join("")),$(".delete-module").click(function(){$(this).parent().parent().addClass("animated zoomOut");var e=this;setTimeout(function(){$(e).parent().parent().remove()},500)})}),$(".module-context .fix").click(function(){var e=[];e.push('<div class="module-context animated zoomIn">'),e.push('<input type="text" class="form-control module-name" placeholder="模块名称">'),e.push('<div class="operationicon">'),e.push('<span class="glyphicon glyphicon-trash span-icon span-icon-cursor delete-module span-red"></span>'),e.push("</div>"),e.push('<div style="clear: both"></div>'),e.push("</div>"),$("#add-first-module-ialog .context").append(e.join("")),$(".delete-module").click(function(){$(this).parent().parent().addClass("animated zoomOut");var e=this;setTimeout(function(){$(e).parent().parent().remove()},500)})}),$("#post-module").click(function(){var t=[];$(".module-name").each(function(){t.push($(this).val())}),layer.close(i),e(JSON.stringify(t),"","")}),$("#post-second-module").unbind("click").click(function(){var t=[],o=[];$(".second-module-name").each(function(){t.push($(this).val())}),$(".second-module-url").each(function(){o.push($(this).val())}),layer.close(a),e(JSON.stringify(t),JSON.stringify(o),u)}),$("#update-first-module").unbind("click").click(function(){""===$("#update-first-name").val()?layer.msg(" 值 不 可 为 空 "):l(d,$("#update-first-name").val(),"")}),$("#update-second-module").unbind("click").click(function(){""===$("#update-second-name").val()||""===$("#update-second-url").val()?layer.msg(" 值 不 可 为 空 "):l(d,$("#update-second-name").val(),$("#update-second-url").val())}),$("#cancel-module").click(function(){layer.close(i)}),$("#cancel-second-module").click(function(){layer.close(c)}),$("#cancel-first-module").click(function(){layer.close(s)}),$("#cancel-second-btn").click(function(){layer.close(a)})});