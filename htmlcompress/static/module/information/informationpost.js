define(function(require,exports,module){function n(){var i=$("#user-loginname").val();t.information.infoManualShow.getInforPost(i,function(i){if(0===i.result)$(".info-show-context").empty();else{for(var e=i.data,a=e.length,r=[],s=0;s<a;s++){var p="";switch(r.push('<div class="info-context-item">'),r.push('<div class="info-context word">'+e[s].infor_context.substring(0,20)+"</div>"),r.push('<div class="info-time word">'+e[s].infor_post_time.substring(0,16)+"</div>"),e[s].infor_post_type){case"qq":p="QQ";break;case"qqGroup":p="QQ群";break;case"weixin":p="微信";break;case"weixinGroup":p="微信群"}r.push('<div class="info-type word">'+p+"</div>"),r.push('<div class="info-post word">'+e[s].infor_post_people+"--"+e[s].number_name.substring(0,5)+"</div>"),r.push('<div class="info-get word">'+e[s].infor_get_people+"--"+e[s].get_remark+"</div>"),r.push('<div class="info-operate word">');var u=e[s].infor_context.replace(/\"/g,"”");r.push('<button type="button" data-clipboard-text="'+u+'" class="btn btn-primary">复制</button>'),r.push('<button type="button" class="btn btn-danger" inforId="'+e[s].id+'">删除</button>'),r.push('<button type="button" class="btn btn-success" inforId="'+e[s].id+'">完成</button>'),r.push("</div></div>")}$(".info-show-context").empty(),$(".info-show-context").append(r.join(""));new Clipboard(".btn-primary");$(".btn-primary").click(function(){$(".btn-primary").parent().parent().removeClass("active"),$(this).parent().parent().addClass("active")}),$(".btn-success").on("click",function(){var i=$(this).attr("inforId");$(this).parent().parent().remove(),t.information.infoManualShow.updateInforPost(i,o.user.user_loginname,function(t){$(".info-context-item").length<20&&n()})}),$(".btn-danger").on("click",function(){var n=$(this).attr("inforId");$(this).parent().parent().remove(),t.information.infoManualShow.deleteInforPost(n,function(n){})})}})}var t=require("../../common/api"),o=window.parent.SYSTEM;$("#search-infor-data").click(function(){n()}),t.system.userManage.getAllUser(function(n){for(var t=n.data,o=[],i=0;i<n.total;i++)o.push('<option value="'+t[i].user_loginname+'">'+t[i].user_name+"</option>");$("#user-loginname").append(o.join(""))}),n()});