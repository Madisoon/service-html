define(function(require,exports,module){function e(){$("#qq-table").bootstrapTable("destroy"),$("#qq-table").bootstrapTable({columns:[{checkbox:!0},{field:"qq_number",searchable:!0,sortable:!0,title:"QQ号"},{field:"qq_name",searchable:!0,title:"昵称"},{field:"qq_remark",searchable:!0,title:"备注"}],pageNumber:1,pageSize:10,dataField:"data",undefinedText:"--",sidePagination:"client",classes:"table table-bordered table-hover",method:"post",url:n.baseUrl+"/getAllQq",pagination:!0,paginationHAlign:"left",paginationDetailHAlign:"right",onClickRow:function(e){t(e,!0),o=0,i=layer.open({title:" 新增配置QQ",type:1,area:["50%","70%"],content:$("#qq-editor-dialog")}),s=e.id},onLoadSuccess:function(e){}})}function a(){$("#plan-table").bootstrapTable("destroy"),$("#plan-table").bootstrapTable({columns:[{checkbox:!0},{field:"plan_name",searchable:!0,sortable:!0,title:"计划任务名称"},{field:"plan_remark",searchable:!0,title:"备注"}],pageNumber:1,pageSize:10,dataField:"data",undefinedText:"--",sidePagination:"client",classes:"table table-bordered table-hover",method:"post",url:n.baseUrl+"/getAllPlan",pagination:!0,paginationHAlign:"left",paginationDetailHAlign:"right",onClickRow:function(e){c=0,l(e,!0),r=layer.open({title:" 新增计划任务",type:1,area:["60%","80%"],content:$("#plan-editor-dialog")}),d=e.id},onLoadSuccess:function(e){}})}function t(e,a){a?($("#qq-number").val(e.qq_number),$("#qq-name").val(e.qq_name),$("#qq-password").val(e.qq_password),$("#qq-remark").val(e.qq_remark)):($("#qq-number").val(""),$("#qq-name").val(""),$("#qq-password").val(""),$("#qq-remark").val(""))}function l(e,a){if(a){var t=e.day_one.split("-"),l=e.day_two.split("-"),n=e.day_three.split("-"),i=e.day_four.split("-"),r=e.day_five.split("-"),o=e.day_six.split("-"),s=e.day_seven.split("-");$(".day-one-start").val(t[0]),$(".day-one-end").val(t[1]),$(".day-two-start").val(l[0]),$(".day-two-end").val(l[1]),$(".day-three-start").val(n[0]),$(".day-three-end").val(n[1]),$(".day-four-start").val(i[0]),$(".day-four-end").val(i[1]),$(".day-five-start").val(r[0]),$(".day-five-end").val(r[1]),$(".day-six-start").val(o[0]),$(".day-six-end").val(o[1]),$(".day-seven-start").val(s[0]),$(".day-seven-end").val(s[1]),$("#plan-name").val(e.plan_name),$("#plan-remark").val(e.plan_remark)}else $(".form-control.time-start").val(""),$(".form-control.time-end").val(""),$("#plan-name").val(""),$("#plan-remark").val("")}var n=require("../../common/api");require("../../../spm_modules/datepicker/jquery.datetimepicker.full.min"),require("../../../spm_modules/bootstrap-3.3.0-dist/dist/js/bootstrap.min.js"),require("../../../spm_modules/bootstrap-table-master/dist/bootstrap-table.min.js"),require("../../../spm_modules/bootstrap-table-master/dist/locale/bootstrap-table-zh-CN.min.js");var i,r,o,s,d,c;$.datetimepicker.setLocale("zh"),$(".time-start").datetimepicker({format:"H:i",datepicker:!1}),$(".time-end").datetimepicker({format:"H:i",datepicker:!1}),$("#add-qq-btn").unbind("click").click(function(){t(null,!1),o=1,i=layer.open({title:" 新增配置QQ",type:1,area:["50%","70%"],content:$("#qq-editor-dialog")})}),$("#first-time-start").change(function(){$(".form-control.time-start").val($("#first-time-start").val())}),$("#plan-cancel-btn").unbind("click").click(function(){layer.close(r)}),$("#first-time-last").change(function(){$(".form-control.time-end").val($("#first-time-last").val())}),$("#add-plan-btn").unbind("click").click(function(){c=1,l(null,!1),r=layer.open({title:" 新增计划任务",type:1,area:["60%","80%"],content:$("#plan-editor-dialog")})}),$("#plan-post-btn").unbind("click").click(function(){layer.close(r);var e={plan_name:$("#plan-name").val(),plan_remark:$("#plan-remark").val(),day_one:$(".day-one-start").val()+"-"+$(".day-one-end").val(),day_two:$(".day-two-start").val()+"-"+$(".day-two-end").val(),day_three:$(".day-three-start").val()+"-"+$(".day-three-end").val(),day_four:$(".day-four-start").val()+"-"+$(".day-four-end").val(),day_five:$(".day-five-start").val()+"-"+$(".day-five-end").val(),day_six:$(".day-six-start").val()+"-"+$(".day-six-end").val(),day_seven:$(".day-seven-start").val()+"-"+$(".day-seven-end").val()};c?n.movement.configureManage.addPlan(JSON.stringify(e),function(e){e.result?($("#plan-table").bootstrapTable("refresh",null),layer.msg(" 添 加 成 功 ！",{icon:1,time:1200})):layer.msg(" 添 加 失 败 ！",{icon:2,time:1200})}):n.movement.configureManage.updatePlan(JSON.stringify(e),d,function(e){e.result?($("#plan-table").bootstrapTable("refresh",null),layer.msg(" 修 改 成 功 ！",{icon:1,time:1200})):layer.msg(" 修 改 失 败 ！",{icon:2,time:1200})})}),$("#delete-plan-btn").unbind("click").click(function(){var e=$("#plan-table").bootstrapTable("getSelections",null),t=e.length,l=[];if(0===t)layer.msg(" 没 有 选 中 任 何 数 据 ");else{for(var i=0;i<t;i++)l.push(e[i].id);n.movement.configureManage.deletePlan(l.join(","),function(e){e.result?(a(),layer.msg(" 删 除 成 功 ！",{icon:1,time:1200})):layer.msg(" 删 除 失 败 ！",{icon:2,time:1200})})}}),$("#qq-cancel-btn").unbind("click").click(function(){layer.close(i)}),$("#delete-qq-btn").unbind("click").click(function(){var a=$("#qq-table").bootstrapTable("getSelections",null),t=a.length,l=[];if(0===t)layer.msg(" 没 有 选 中 任 何 数 据 ");else{for(var i=0;i<t;i++)l.push(a[i].id);n.movement.configureManage.deleteQq(l.join(","),function(a){a.result?(e(),layer.msg(" 删 除 成 功 ！",{icon:1,time:1200})):layer.msg(" 删 除 失 败 ！",{icon:2,time:1200})})}}),$("#qq-post-btn").unbind("click").click(function(){layer.close(i);var e={qq_number:$("#qq-number").val(),qq_name:$("#qq-name").val(),qq_password:$("#qq-password").val(),qq_remark:$("#qq-remark").val()};o?n.movement.configureManage.addQq(JSON.stringify(e),function(e){e.result?($("#qq-table").bootstrapTable("refresh",null),layer.msg(" 添 加 成 功 ！",{icon:1,time:1200})):layer.msg(" 添 加 失 败 ！",{icon:2,time:1200})}):n.movement.configureManage.updateQq(JSON.stringify(e),s,function(e){e.result?($("#qq-table").bootstrapTable("refresh",null),layer.msg(" 修 改 成 功 ！",{icon:1,time:1200})):layer.msg(" 修 改 失 败 ！",{icon:2,time:1200})})}),e(),a()});