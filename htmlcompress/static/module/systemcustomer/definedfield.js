define(function(require,exports,module){var e=require("../../common/api"),t={},i={},l="",n={field_title:"",field_type:"",field_hint:"",field_must:"",field_value:"",field_name:"",field_fix:"0"};$(".field-setting").hide(),$(".field-setting .title span").unbind("click").click(function(){$(".field-setting").stop().slideUp()}),$(".field-setting .action .cancel").unbind("click").click(function(){$(".field-setting").stop().slideUp()}),$(".field-setting .action .post").unbind("click").click(function(){i.postData("",!1,t.getAllField,l,function(e){1==e&&$(".field-setting").stop().slideUp()})}),$.datetimepicker.setLocale("zh"),t.getSingleField=function(t,l){e.customManage.fieldManage.getSingleField(t,function(e){0==e.result?layer.msg(" 数 据 为 空",{icon:2,time:1200}):("input"==l||"textarea"==l||"inputtime"==l?(n.field_type=l,i=new inputField(n)):(n.field_type=l,i=new selectField(n)),$(".field-setting-context").empty(),i.writedom("field-setting-context",e.data,!0))})},t.getAllField=function(){e.customManage.fieldManage.getAllField("kind",function(i){if(0==i.result)layer.msg(" 数 据 为 空",{icon:2,time:1200});else{var n=i.data.fix,d=i.data.fix.length;$(".pretermit-field form").empty();var f=new $.fieldshow.init(n,d,"");$(".pretermit-field form").append(f.writeDom());var o=i.data.noFix,a=i.data.noFix.length;$(".extra-field form").empty(),f=new $.fieldshow.init(o,a,""),$(".extra-field form").append(f.writeDom()),$(".datepicker-controller").datetimepicker({format:"Y-m-d",timepicker:!1}),$("#defined-field-html .form-horizontal .form-group").unbind("click").click(function(){l=$(this).attr("field-id"),$("#defined-field-html .form-horizontal .form-group").removeClass("form-active"),$(this).addClass("form-active");var e=$(this).attr("field-type");t.getSingleField($(this).attr("field-id"),e),$(".field-setting .title small").text($(this).attr("field-content-dialog")),$(".field-setting").stop().slideDown()}),$("#defined-field-html .form-horizontal .form-group .delete-field").unbind("click").click(function(){var t=$(this).parent().attr("field-id"),i=this;e.customManage.fieldManage.deleteField(t,function(e){$(".field-setting").stop().slideUp(),$(i).parent().remove()})})}})},t.getAllField(),$(".assembly-group button").unbind("click").click(function(){$("#defined-field-html .form-horizontal .form-group").removeClass("form-active"),l="";var e=$(this).attr("field-type");n.field_type=e,i="input"==e||"inputtime"==e||"textarea"==e?new inputField(n):new selectField(n),$(".field-setting-context").empty(),i.writedom("field-setting-context","",!1),$(".field-setting .title small").text($(this).attr("field-context")),$(".field-setting").stop().slideDown()})});